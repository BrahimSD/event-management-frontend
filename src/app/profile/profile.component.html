<div class="profile-container">
    <div class="profile-header">
      <div class="avatar-section">
        <div class="avatar-wrapper">
          <ng-container *ngIf="!user?.avatar || user?.avatar === 'fas fa-user-circle'; else userAvatar">
            <i class="fas fa-user-circle"></i>
          </ng-container>
          <ng-template #userAvatar>
            <img [src]="user?.avatar" alt="Profile avatar">
          </ng-template>
        </div>
        <button class="edit-avatar-btn" (click)="editAvatar.click()" *ngIf="isEditing">
          <i class="fas fa-camera"></i>
        </button>
        <input
          #editAvatar
          type="file"
          hidden
          (change)="onAvatarSelected($event)"
          accept="image/*">
      </div>
  
      <div class="profile-info">
        <div class="info-group">
            <h2>{{ user?.username }}</h2>
        </div>
  
        <div class="info-group">
          <div class="location-wrapper">
            <i class="fas fa-map-marker-alt"></i>
            <span *ngIf="!isEditing">{{ user?.location || 'Add location' }}</span>
            <div *ngIf="isEditing && user" class="location-input-wrapper">
              <input 
                type="text" 
                [(ngModel)]="user!.location" 
                placeholder="Location"
                id="location">
              <button type="button" class="auto-locate-btn" (click)="getCurrentLocation()">
                <i class="fas fa-location-arrow"></i>
              </button>
            </div>
          </div>
        </div>
  
        <button class="edit-btn" (click)="onEditClick()">
          <i class="fas" [class.fa-edit]="!isEditing" [class.fa-save]="isEditing"></i>
          {{ isEditing ? 'Save Changes' : 'Edit Profile' }}
        </button>
      </div>
    </div>
  
    <div class="profile-about">
      <h3>About</h3>
      <p *ngIf="!isEditing">{{ user?.about || 'No description provided.' }}</p>
      <textarea 
        *ngIf="isEditing && user" 
        [(ngModel)]="user!.about" 
        placeholder="Tell us about yourself"></textarea>
    </div>
  
    <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
</div>